# 交点座標計算 (coordinate-calculator)

目的
- 図面上の直線/円弧(R)の交点座標をミリ単位で算出し、結果を履歴として残す。
- 現場でスマホ/タブレットから素早く確認できる簡易グラフィカルツール。

前提/座標系
- 2D直交座標。原点(0,0)固定表示。
- 単位: mm。小数桁は設定で1〜3桁、デフォルト2桁（四捨五入）。

入力パターン
- 直線: 2点指定 または 1点+角度指定。
- 円弧(円): 中心点+半径(R)。
- 交差パターン: 直線×直線、直線×円、円×円。複数交点がある場合は候補を選択させる。
- 必須フィールド: 座標入力値、半径(R)が正数かつ非ゼロ。直線の2点は同一点不可。

出力/機能
- 交点の (x, y) を計算し、設定桁数で表示。
- 計算結果をローカル履歴に保存（名前/メモ付き）。手動削除まで残す。
- 履歴の個別削除・全削除。後続でCSV共有を追加可能。

UI/UX
- 簡易2Dキャンバス: 原点表示、入力済み直線/円弧を描画、交点をマーカー表示。
- ズーム/パンは最低限。候補点が複数ある場合はタップ/リストで選択。
- 手袋対応の大きめボタン。スマホ/タブレット両対応レイアウト。
- エラー表示: 平行で交点なし、接線(1解)、解なしなどを明示。

データモデル(ローカル)
- settings: id, decimal_places (1-3)
- history: id, title, memo, inputs_json, result_points_json, created_at
  - inputs_json 例: {"lineA": {"p1": [x1,y1], "p2": [x2,y2]}, "circleB": {"center": [cx,cy], "r": r}}
  - result_points_json: 交点配列 [{"x": x, "y": y, "type": "intersection|tangent"}]

非機能
- 完全オフライン。Android 8+。日本語UI。
- アクセシビリティ: contentDescription、48dpタップ領域。
- 数値バリデーション: NaN禁止、桁数設定の反映、丸め一貫性。

テスト観点
- 直線が平行で交点なし → 適切にメッセージ。
- 直線×円が接するケース → 交点が1点。
- 円×円: 2交点/1接点/なし の各パターン。
- 小数桁設定変更で表示が即反映。
- 履歴の保存/削除が期待通り動く。

次ステップ（実装時）
- Android Studioで `apps/coordinate-calculator` モジュールを生成し、`settings.gradle` に include。
- 座標演算ユーティリティをKotlinで実装（直線・円クラス + 交差計算）。
- シンプルなCanvas/View + RecyclerView履歴リストを用意。Roomで履歴保存。
